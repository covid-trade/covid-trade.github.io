define(["exports","./arrayRemoveDuplicates-3a9a9480","./Cartesian2-b4b7b0b3","./when-208fe5b0","./Math-8386669c","./PolylinePipeline-b25bdf3a"],(function(e,i,t,a,r,n){"use strict";var o={},l=new t.Cartographic,s=new t.Cartographic;function h(e,n,o,h){var g=(n=i.arrayRemoveDuplicates(n,t.Cartesian3.equalsEpsilon)).length;if(!(g<2)){var p=a.defined(h),u=a.defined(o),c=new Array(g),d=new Array(g),y=new Array(g),v=n[0];c[0]=v;var m=e.cartesianToCartographic(v,l);u&&(m.height=o[0]),d[0]=m.height,y[0]=p?h[0]:0;for(var P,f,A=d[0]===y[0],C=1,b=1;b<g;++b){var w=n[b],M=e.cartesianToCartographic(w,s);u&&(M.height=o[b]),A=A&&0===M.height,P=m,f=M,r.CesiumMath.equalsEpsilon(P.latitude,f.latitude,r.CesiumMath.EPSILON10)&&r.CesiumMath.equalsEpsilon(P.longitude,f.longitude,r.CesiumMath.EPSILON10)?m.height<M.height&&(d[C-1]=M.height):(c[C]=w,d[C]=M.height,y[C]=p?h[b]:0,A=A&&d[C]===y[C],t.Cartographic.clone(M,m),++C)}if(!(A||C<2))return c.length=C,d.length=C,y.length=C,{positions:c,topHeights:d,bottomHeights:y}}}var g=new Array(2),p=new Array(2),u={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};o.computePositions=function(e,i,t,o,l,s){var c=h(e,i,t,o);if(a.defined(c)){i=c.positions,t=c.topHeights,o=c.bottomHeights;var d=i.length,y=(c=d-2,r.CesiumMath.chordLength(l,e.maximumRadius)),v=u;if(v.minDistance=y,v.ellipsoid=e,s){for(var m=0,P=0;P<d-1;P++)m+=n.PolylinePipeline.numberOfPoints(i[P],i[P+1],y)+1;var f=new Float64Array(3*m),A=new Float64Array(3*m),C=g,b=p;v.positions=C,v.height=b;var w=0;for(P=0;P<d-1;P++){C[0]=i[P],C[1]=i[P+1],b[0]=t[P],b[1]=t[P+1];var M=n.PolylinePipeline.generateArc(v);f.set(M,w),b[0]=o[P],b[1]=o[P+1],A.set(n.PolylinePipeline.generateArc(v),w),w+=M.length}}else v.positions=i,v.height=t,f=new Float64Array(n.PolylinePipeline.generateArc(v)),v.height=o,A=new Float64Array(n.PolylinePipeline.generateArc(v));return{bottomPositions:A,topPositions:f,numCorners:c}}},e.WallGeometryLibrary=o}));